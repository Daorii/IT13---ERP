<Page x:Class="Real_Estate_Agencies.ClientsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="ClientsPage"
      Background="#F8FAFC">

    <Page.Resources>

        <DropShadowEffect x:Key="DropShadowEffect"
                  Color="#000000"
                  BlurRadius="15"
                  ShadowDepth="3"
                  Opacity="0.25"/>
        
        <SolidColorBrush x:Key="PrimaryBlue" Color="#3B82F6"/>
        <SolidColorBrush x:Key="DarkBlue" Color="#1E40AF"/>
        <SolidColorBrush x:Key="Gray50" Color="#F9FAFB"/>
        <SolidColorBrush x:Key="Gray100" Color="#F3F4F6"/>
        <SolidColorBrush x:Key="Gray200" Color="#E5E7EB"/>
        <SolidColorBrush x:Key="Gray400" Color="#9CA3AF"/>
        <SolidColorBrush x:Key="Gray600" Color="#4B5563"/>
        <SolidColorBrush x:Key="Gray800" Color="#1F2937"/>
        <SolidColorBrush x:Key="PastelBlue" Color="#A7C7E7"/>
        <SolidColorBrush x:Key="PastelYellow" Color="#FFF9B1"/>

        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="{StaticResource Gray600}"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="TextAlignment" Value="Center"/>
        </Style>

        <Style x:Key="CellTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{StaticResource Gray800}"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Style x:Key="CircularIconButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="{StaticResource Gray200}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="16">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource Gray50}"/>
                    <Setter Property="BorderBrush" Value="{StaticResource Gray400}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="AddButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryBlue}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource DarkBlue}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="FormComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource Gray200}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="{StaticResource Gray800}"/>
            <Setter Property="Height" Value="34"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Border x:Name="Border"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="6">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <ContentPresenter Grid.Column="0"
                                          Margin="{TemplateBinding Padding}"
                                          VerticalAlignment="Center"
                                          HorizontalAlignment="Left"
                                          Content="{TemplateBinding SelectionBoxItem}"/>

                                <ToggleButton Grid.Column="1"
                                      Width="30"
                                      Background="Transparent"
                                      BorderThickness="0"
                                      Focusable="False"
                                      IsChecked="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                      ClickMode="Press">
                                    <Path Data="M 0 0 L 4 4 L 8 0 Z"
                                  Fill="{StaticResource Gray600}"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                                </ToggleButton>

                                <Popup x:Name="PART_Popup"
                               IsOpen="{TemplateBinding IsDropDownOpen}"
                               Placement="Bottom"
                               AllowsTransparency="True">
                                    <Border Background="White"
                                    BorderBrush="{StaticResource Gray200}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    MaxHeight="200">
                                        <ScrollViewer>
                                            <ItemsPresenter/>
                                        </ScrollViewer>
                                    </Border>
                                </Popup>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource PrimaryBlue}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="FormTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource Gray200}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="{StaticResource Gray800}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost" Padding="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource PrimaryBlue}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Page.Resources>

    <Border Padding="24">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header + Search -->
            <Grid Grid.Row="0" Margin="0,0,0,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Search Bar -->
                <Border Grid.Column="0" Background="White" CornerRadius="8" BorderBrush="{StaticResource Gray200}" BorderThickness="1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="🔍" FontSize="14" Margin="12,0,8,0" VerticalAlignment="Center" Foreground="{StaticResource Gray400}"/>
                        <TextBox Grid.Column="1" x:Name="SearchTextBox" Background="Transparent" BorderThickness="0" FontSize="14" Padding="0,12"
                                 VerticalAlignment="Center"/>
                    </Grid>
                </Border>

                <!-- Add Client Button -->
                <Button Grid.Column="1" Content="+ Add Client" Style="{StaticResource AddButtonStyle}" Click="AddClient_Click" Margin="16,0,0,0"/>
            </Grid>

            <!-- Clients Table -->
            <Grid Grid.Row="1" Grid.RowSpan="2" HorizontalAlignment="Stretch">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Table Header -->
                <Border Background="White" CornerRadius="8,8,0,0" BorderBrush="{StaticResource Gray200}" BorderThickness="1,1,1,0" Grid.Row="0">
                    <Grid Background="{StaticResource Gray50}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="0.5*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="1.5*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="0.7*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Client ID" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="1" Text="First Name" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="2" Text="Last Name" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="3" Text="Contact Info" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="4" Text="Address" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="5" Text="Preferred Property" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="6" Text="Action" Style="{StaticResource HeaderTextStyle}"/>
                    </Grid>
                </Border>

                <!-- Clients List -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Background="White">
                    <Border CornerRadius="0,0,8,8" BorderBrush="{StaticResource Gray200}" BorderThickness="1,0,1,1">
                        <ItemsControl x:Name="ClientsDataGrid" ItemsSource="{Binding Clients}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="White" BorderBrush="{StaticResource Gray100}" BorderThickness="0,0,0,1">
                                        <Grid MouseLeftButtonDown="ClientRow_Click">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="0.5*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="1.5*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="0.7*"/>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Grid.Column="0" Text="{Binding ClientId}" Style="{StaticResource CellTextStyle}" TextAlignment="Center"/>
                                            <TextBlock Grid.Column="1" Text="{Binding FirstName}" Style="{StaticResource CellTextStyle}" TextAlignment="Center"/>
                                            <TextBlock Grid.Column="2" Text="{Binding LastName}" Style="{StaticResource CellTextStyle}" TextAlignment="Center"/>
                                            <TextBlock Grid.Column="3" Text="{Binding ContactInfo}" Style="{StaticResource CellTextStyle}" TextAlignment="Center"/>
                                            <TextBlock Grid.Column="4" Text="{Binding Address}" Style="{StaticResource CellTextStyle}" TextAlignment="Center"/>
                                            <TextBlock Grid.Column="5" Text="{Binding PreferredPropertyType}" Style="{StaticResource CellTextStyle}" TextAlignment="Center"/>

                                            <StackPanel Grid.Column="6" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Button Style="{StaticResource CircularIconButtonStyle}" ToolTip="Edit" Margin="2,0" Click="EditClient_Click" CommandParameter="{Binding}">
                                                    <TextBlock Text="✏️" FontSize="12"/>
                                                </Button>
                                                <Button Style="{StaticResource CircularIconButtonStyle}" ToolTip="Delete" Margin="2,0" Click="DeleteClient_Click" CommandParameter="{Binding}">
                                                    <TextBlock Text="🗑️" FontSize="12"/>
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Border>
                </ScrollViewer>
            </Grid>

            <!-- Edit Client Overlay (Incentives Style) -->
            <Grid x:Name="EditPopupOverlay"
      Grid.RowSpan="4"
      Background="#80000000"
      Visibility="Collapsed"
      VerticalAlignment="Stretch"
      HorizontalAlignment="Stretch"
      Panel.ZIndex="99">
                <Border Background="White"
            CornerRadius="16"
            Padding="30"
            Width="480"
            MaxHeight="700"
            VerticalAlignment="Center"
            HorizontalAlignment="Center"
            Margin="20">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000"
                              Opacity="0.12"
                              BlurRadius="16"
                              ShadowDepth="4"
                              Direction="270"/>
                    </Border.Effect>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Close Button -->
                        <Button Content="✕"
                    Width="32"
                    Height="32"
                    FontSize="14"
                    FontWeight="Bold"
                    Background="#F5F6FA"
                    BorderThickness="0"
                    Foreground="#5C677D"
                    HorizontalAlignment="Right"
                    Cursor="Hand"
                    Click="CloseEditPopup_Click"
                    Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}"/>

                        <!-- Header -->
                        <StackPanel Grid.Row="0" Margin="0,10,0,20">
                            <TextBlock Text="Edit Client"
                           FontSize="22"
                           FontWeight="Bold"
                           Foreground="#2C3E50"/>
                            <TextBlock Text="Update client information"
                           FontSize="13"
                           Foreground="#6C7A89"
                           Margin="0,5,0,0"/>
                        </StackPanel>

                        <!-- Form Content -->
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                            <StackPanel Orientation="Vertical">
                                <TextBox x:Name="EditClientIdTextBox"
                             Visibility="Collapsed"/>

                                <StackPanel Margin="0,0,0,12">
                                    <TextBlock Text="First Name"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="#5C677D"/>
                                    <TextBox x:Name="EditFirstNameTextBox"
                                 Height="40"
                                 Padding="10"
                                 BorderBrush="#E1E8ED"
                                 BorderThickness="1"
                                 Background="White"
                                 Foreground="#5C677D"
                                 VerticalContentAlignment="Center"/>
                                </StackPanel>

                                <StackPanel Margin="0,0,0,12">
                                    <TextBlock Text="Last Name"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="#5C677D"/>
                                    <TextBox x:Name="EditLastNameTextBox"
                                 Height="40"
                                 Padding="10"
                                 BorderBrush="#E1E8ED"
                                 BorderThickness="1"
                                 Background="White"
                                 Foreground="#5C677D"
                                 VerticalContentAlignment="Center"/>
                                </StackPanel>

                                <StackPanel Margin="0,0,0,12">
                                    <TextBlock Text="Contact Info"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="#5C677D"/>
                                    <TextBox x:Name="EditContactInfoTextBox"
                                 Height="40"
                                 Padding="10"
                                 BorderBrush="#E1E8ED"
                                 BorderThickness="1"
                                 Background="White"
                                 Foreground="#5C677D"
                                 VerticalContentAlignment="Center"/>
                                </StackPanel>

                                <StackPanel Margin="0,0,0,12">
                                    <TextBlock Text="Address"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="#5C677D"/>
                                    <TextBox x:Name="EditAddressTextBox"
                                 Height="70"
                                 Padding="10"
                                 BorderBrush="#E1E8ED"
                                 BorderThickness="1"
                                 Background="White"
                                 Foreground="#5C677D"
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"/>
                                </StackPanel>

                                <StackPanel Margin="0,0,0,12">
                                    <TextBlock Text="Preferred Property Type"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="#5C677D"/>
                                    <ComboBox x:Name="EditPreferredPropertyTypeComboBox"
                                  Height="40"
                                  Padding="8,4"
                                  BorderBrush="#E1E8ED"
                                  BorderThickness="1"
                                  Background="White"
                                  Foreground="#2C3E50"
                                  VerticalContentAlignment="Center">
                                        <ComboBoxItem Content="Apartment"/>
                                        <ComboBoxItem Content="House"/>
                                        <ComboBoxItem Content="Condo"/>
                                        <ComboBoxItem Content="Townhouse"/>
                                        <ComboBoxItem Content="Villa"/>
                                    </ComboBox>
                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>

                        <!-- Footer Buttons -->
                        <StackPanel Grid.Row="2"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,20,0,0">
                            <Button Content="Close"
                        Width="90"
                        Height="40"
                        Background="White"
                        BorderBrush="#D0D5DD"
                        BorderThickness="1"
                        Foreground="#344054"
                        Cursor="Hand"
                        Margin="0,0,12,0"
                        Click="CloseEditPopup_Click"/>
                            <Button Content="Save Changes"
                        Width="140"
                        Height="40"
                        Background="#4F46E5"
                        BorderThickness="0"
                        Foreground="White"
                        FontWeight="Bold"
                        Cursor="Hand"
                        Click="SaveClient_Click"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>


            <!-- Profile Popup Overlay -->
            <!-- Place this inside the main Grid of your page, NOT outside Page tags -->
            <!-- Profile Popup Overlay -->
            <!-- Profile Popup -->
            <Grid x:Name="ProfilePopupOverlay" Background="#80000000" Visibility="Collapsed" Grid.RowSpan="4">
                <Border Width="500" MaxHeight="600"
            Background="#CCFFFFFF"  
                    CornerRadius="16"
            Padding="0"
            VerticalAlignment="Center"
            HorizontalAlignment="Center"
            Effect="{DynamicResource DropShadowEffect}">

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Header -->
                        <Border Background="{StaticResource PastelBlue}" CornerRadius="16,16,0,0" Padding="24">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock x:Name="ProfileFullName" FontSize="20" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                                <Border Width="32" Height="32" Background="Transparent" Grid.Column="1">
                                    <Button Content="✕" Background="Transparent" BorderThickness="0" Foreground="White" Click="CloseProfilePopup_Click"/>
                                </Border>
                            </Grid>
                        </Border>

                        <!-- Content -->
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="24">
                            <StackPanel>
                                <!-- Use Margin instead of Spacing -->
                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Client ID:" FontWeight="SemiBold" Foreground="{StaticResource Gray600}" Grid.Column="0"/>
                                    <TextBlock x:Name="ProfileClientId" Grid.Column="1" Foreground="{StaticResource Gray800}"/>
                                </Grid>

                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Contact Info:" FontWeight="SemiBold" Foreground="{StaticResource Gray600}" Grid.Column="0"/>
                                    <TextBlock x:Name="ProfileContactInfo" Grid.Column="1" Foreground="{StaticResource Gray800}"/>
                                </Grid>

                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Address:" FontWeight="SemiBold" Foreground="{StaticResource Gray600}" Grid.Column="0"/>
                                    <TextBlock x:Name="ProfileAddress" Grid.Column="1" Foreground="{StaticResource Gray800}" TextWrapping="Wrap"/>
                                </Grid>

                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Preferred Property:" FontWeight="SemiBold" Foreground="{StaticResource Gray600}" Grid.Column="0"/>
                                    <TextBlock x:Name="ProfilePreferredProperty" Grid.Column="1" Foreground="{StaticResource Gray800}"/>
                                </Grid>

                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Balance:" FontWeight="SemiBold" Foreground="{StaticResource Gray600}" Grid.Column="0"/>
                                    <TextBlock x:Name="ProfileBalance" Grid.Column="1" Foreground="{StaticResource Gray800}"/>
                                </Grid>

                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Payment Date:" FontWeight="SemiBold" Foreground="{StaticResource Gray600}" Grid.Column="0"/>
                                    <TextBlock x:Name="ProfilePaymentDate" Grid.Column="1" Foreground="{StaticResource Gray800}"/>
                                </Grid>

                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Amount Paid:" FontWeight="SemiBold" Foreground="{StaticResource Gray600}" Grid.Column="0"/>
                                    <TextBlock x:Name="ProfileAmountPaid" Grid.Column="1" Foreground="{StaticResource Gray800}"/>
                                </Grid>

                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Payment Type:" FontWeight="SemiBold" Foreground="{StaticResource Gray600}" Grid.Column="0"/>
                                    <TextBlock x:Name="ProfilePaymentType" Grid.Column="1" Foreground="{StaticResource Gray800}"/>
                                </Grid>

                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Status:" FontWeight="SemiBold" Foreground="{StaticResource Gray600}" Grid.Column="0"/>
                                    <TextBlock x:Name="ProfileStatus" Grid.Column="1" Foreground="{StaticResource Gray800}"/>
                                </Grid>
                            </StackPanel>
                        </ScrollViewer>

                        <!-- Action Buttons -->
                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="24,16,24,24">
                            <Border Width="100" Height="36" Background="{StaticResource PastelYellow}" CornerRadius="12">
                                <Button Content="Close" Background="Transparent" BorderThickness="0" Foreground="{StaticResource Gray800}" Click="CloseProfilePopup_Click"/>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Page>
